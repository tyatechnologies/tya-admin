!function(){function c(c,e){if(!(c instanceof e))throw new TypeError("Cannot call a class as a function")}function e(c,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(c,n.key,n)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"4rKK":function(t,n,i){"use strict";i.r(n),i.d(n,"DetailModule",(function(){return z}));var s=i("ofXK"),a=i("advQ"),r=i("kmKP"),d=i("dihp"),o=i("cp0P"),l=i("nYR2"),u=i("fXoL"),p=i("tyNb"),h=i("aceb"),b=i("3Pt+"),g=i("jF+W"),f=i("NL+w"),m=i("5CSc"),v=i("22EG"),y=i("GwA9"),I=i("EaEm");function k(c,e){if(1&c&&(u.dc(0,"nb-radio",25),u.dc(1,"nb-alert",26),u.Oc(2),u.cc(),u.cc()),2&c){var t=e.$implicit,n=u.mc(2);u.sc("value",t.id),u.Lb(1),u.sc("status",n.getStatusCell(t)),u.Lb(1),u.Pc(t.name)}}function w(c,e){if(1&c&&u.Yb(0,"ga-application",22),2&c){var t=u.mc(2);u.sc("roleId",t.user.roleId)}}function C(c,e){if(1&c&&(u.dc(0,"nb-list-item"),u.dc(1,"nb-alert",28),u.Oc(2),u.cc(),u.cc()),2&c){var t=e.$implicit;u.Lb(1),u.sc("accent","D"===t.environmentId?"success":"W"===t.environmentId?"warning":"M"===t.environmentId?"info":"basic"),u.Lb(1),u.Qc(" ",t.applicationName,"")}}function L(c,e){if(1&c&&(u.dc(0,"nb-list"),u.Mc(1,C,3,2,"nb-list-item",27),u.cc()),2&c){var t=u.mc(2);u.Lb(1),u.sc("ngForOf",t.user.role.applications)}}function O(c,e){if(1&c){var t=u.ec();u.dc(0,"div",1),u.dc(1,"div",2),u.dc(2,"nb-card"),u.dc(3,"nb-card-header"),u.Oc(4,"Th\xf4ng tin ng\u01b0\u1eddi d\xf9ng"),u.cc(),u.dc(5,"nb-card-body"),u.dc(6,"div",1),u.dc(7,"div",3),u.Yb(8,"input",4),u.dc(9,"input",5),u.kc("ngModelChange",(function(c){return u.Dc(t),u.mc().user.displayName=c})),u.cc(),u.dc(10,"input",6),u.kc("ngModelChange",(function(c){return u.Dc(t),u.mc().user.email=c})),u.cc(),u.dc(11,"input",7),u.kc("ngModelChange",(function(c){return u.Dc(t),u.mc().newPassword=c})),u.cc(),u.dc(12,"button",8),u.kc("click",(function(){return u.Dc(t),u.mc().passwordChange=!0})),u.Oc(13," \u0110\u1ed5i m\u1eadt kh\u1ea9u "),u.dc(14,"core-dialog",9),u.dc(15,"core-dialog-body"),u.Oc(16,"B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n \u0111\u1ed5i m\u1eadt kh\u1ea9u kh\xf4ng?"),u.cc(),u.dc(17,"core-dialog-footer",10),u.dc(18,"button",11),u.kc("click",(function(){return u.Dc(t),u.mc().passwordChange=!1})),u.Oc(19,"Kh\xf4ng"),u.cc(),u.dc(20,"button",12),u.kc("click",(function(){return u.Dc(t),u.mc().changePassword()})),u.Oc(21,"C\xf3"),u.cc(),u.cc(),u.cc(),u.cc(),u.dc(22,"nb-radio-group",13),u.kc("valueChange",(function(c){return u.Dc(t),u.mc().entityEdit.statusId=c})),u.Mc(23,k,3,3,"nb-radio",14),u.cc(),u.cc(),u.dc(24,"div",15),u.dc(25,"h6"),u.Oc(26,"Quy\u1ec1n"),u.cc(),u.dc(27,"ga-tree",16),u.kc("itemSelectedChange",(function(c){return u.Dc(t),u.mc().user.role=c})),u.cc(),u.cc(),u.cc(),u.cc(),u.dc(28,"nb-card-footer",17),u.dc(29,"button",18),u.kc("click",(function(){return u.Dc(t),u.mc().update()})),u.Oc(30,"L\u01b0u"),u.cc(),u.cc(),u.cc(),u.cc(),u.dc(31,"div",2),u.dc(32,"nb-card"),u.dc(33,"nb-card-header",10),u.dc(34,"span"),u.Oc(35," \u1ee8ng d\u1ee5ng \u0111\u01b0\u1ee3c quy\u1ec1n truy c\u1eadp"),u.cc(),u.dc(36,"button",19),u.kc("click",(function(){u.Dc(t);var c=u.mc();return c.isEditApp=!c.isEditApp})),u.Oc(37),u.cc(),u.cc(),u.dc(38,"nb-card-body"),u.Mc(39,w,1,1,"ga-application",20),u.Mc(40,L,2,1,"nb-list",21),u.cc(),u.cc(),u.cc(),u.dc(41,"div",3),u.dc(42,"nb-accordion"),u.dc(43,"nb-accordion-item"),u.dc(44,"nb-accordion-item-header"),u.Oc(45,"L\u1edbp d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c quy\u1ec1n truy c\u1eadp"),u.cc(),u.dc(46,"nb-accordion-item-body"),u.Yb(47,"ga-layer",22),u.cc(),u.cc(),u.cc(),u.cc(),u.dc(48,"div",3),u.dc(49,"nb-accordion"),u.dc(50,"nb-accordion-item",null,23),u.dc(52,"nb-accordion-item-header"),u.Oc(53),u.cc(),u.dc(54,"nb-accordion-item-body"),u.Yb(55,"ga-log",24),u.cc(),u.cc(),u.cc(),u.cc(),u.cc()}if(2&c){var n=u.Ac(51),i=u.mc();u.Lb(8),u.sc("value",i.user.username),u.Lb(1),u.sc("ngModel",i.user.displayName),u.Lb(1),u.sc("ngModel",i.user.email),u.Lb(1),u.sc("ngModel",i.newPassword),u.Lb(3),u.sc("open",i.passwordChange),u.Lb(8),u.sc("value",i.user.statusId),u.Lb(1),u.sc("ngForOf",i.lstUserStatus),u.Lb(4),u.sc("config",i.treeConfig)("itemSelected",i.user.role),u.Lb(2),u.sc("disabled",i.isUpdating)("nbSpinner",i.isUpdating),u.Lb(8),u.Pc(i.isEditApp?"T\u1eaft ch\u1ec9nh s\u1eeda":"Ch\u1ec9nh s\u1eeda"),u.Lb(2),u.sc("ngIf",i.isEditApp),u.Lb(1),u.sc("ngIf",!i.isEditApp),u.Lb(7),u.sc("roleId",i.user.roleId),u.Lb(6),u.Qc("",n.collapsed?"L\u1ecbch s\u1eed ng\u01b0\u1eddi d\xf9ng":"\u0110\xf3ng"," "),u.Lb(2),u.sc("userIdInput",i.user.userId)}}var M,P,S=((M=function(){function t(e,n,i,s,a){c(this,t),this.route=e,this.service=n,this.roleService=i,this.toast=s,this.dialogService=a,this.treeConfig={service:this.roleService,fieldValue:"roleId",fieldName:"roleName",fieldGroup:"roleParentId",displayValueAll:!0,fieldParent:"roleParentId"},this.passwordChange=!1,this.lstUserStatus=[],this.entityEdit={},this._isEditApp=!1,this.isUpdating=!1}var n,i,s;return n=t,(i=[{key:"ngOnInit",value:function(){var c=this,e=this.route.snapshot.paramMap.get("userId");this.service.getOne(e,{fields:["username","displayName","role","statusId","roleId"],join:[{field:"role",select:["roleId"]}]}).subscribe((function(e){c.user=e,c.loadRoleApps(e.roleId)})),this.service.getAllStatus().subscribe((function(e){return c.lstUserStatus=e}))}},{key:"loadRoleApps",value:function(c){var e=this;this.roleService.getOne(c,{fields:["applications"],join:[{field:"applications",select:["applicationId","applicationName","environmentId"]}]}).subscribe((function(c){return e.user.role.applications=c.applications}))}},{key:"getStatusCell",value:function(c){switch(c.id){case a.b.Request:return"info";case a.b.Locked:return"danger";case a.b.Open:return"success";case a.b.Expired:return"warning"}}},{key:"update",value:function(){var c=this,e=[];(this.entityEdit.displayName&&this.entityEdit.displayName!==this.user.displayName||this.entityEdit.statusId&&this.entityEdit.statusId!==this.user.statusId)&&e.push(this.service.patch(this.user.userId,this.entityEdit)),e.length&&(this.isUpdating=!0,Object(o.a)(e).pipe(Object(l.a)((function(){return c.isUpdating=!1}))).subscribe((function(){c.toast.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng","Th\xe0nh c\xf4ng")}),(function(e){return c.toast.danger(e||"C\xf3 l\u1ed7i x\u1ea3y ra","L\u1ed7i")})))}},{key:"forgetPassword",value:function(){this.service.forgetPassword({userId:this.user.userId,email:this.user.email})}},{key:"changePassword",value:function(){var c=this;this.newPassword&&this.newPassword.length>=6?this.service.changePassword({userId:this.user.userId,newPassword:this.newPassword}).pipe(Object(l.a)((function(){return c.passwordChange=!1}))).subscribe({next:function(){c.toast.success("\u0110\u1ed5i m\u1eadt kh\u1ea9u th\xe0nh c\xf4ng","Th\xe0nh c\xf4ng")},error:function(e){c.toast.danger(e,"L\u1ed7i")}}):this.toast.warning("M\u1eadt kh\u1ea9u b\u1ea1n nh\u1eadp ph\u1ea3i h\u01a1n ho\u1eb7c b\u1eb1ng 6 k\xed t\u1ef1")}},{key:"isEditApp",get:function(){return this._isEditApp},set:function(c){this._isEditApp=c,c||this.loadRoleApps(this.user.roleId)}}])&&e(n.prototype,i),s&&e(n,s),t}()).\u0275fac=function(c){return new(c||M)(u.Xb(p.a),u.Xb(r.a),u.Xb(d.b),u.Xb(h.qb),u.Xb(h.C))},M.\u0275cmp=u.Rb({type:M,selectors:[["ga-detail"]],decls:1,vars:1,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col-md-6","col-xs-12"],[1,"col-md-12"],["required","","disabled","","nbInput","","fieldSize","small","type","text","fullWidth","","placeholder","T\xean t\xe0i kho\u1ea3n",1,"mt-3",3,"value"],["nbInput","","fieldSize","small","type","text","fullWidth","","placeholder","T\xean hi\u1ec3n th\u1ecb",1,"mt-3",3,"ngModel","ngModelChange"],["nbInput","","fieldSize","small","type","text","fullWidth","","placeholder","Th\u01b0 \u0111i\u1ec7n t\u1eed",1,"mt-3",3,"ngModel","ngModelChange"],["nbInput","","fieldSize","small","type","password","fullWidth","","placeholder","\u0110\u1ed5i m\u1eadt kh\u1ea9u","fieldSize","large",1,"mt-3",3,"ngModel","ngModelChange"],["nbButton","","size","small","status","primary","outline","",1,"mat-khau",3,"click"],[3,"open"],[1,"d-flex","justify-content-between"],["fullWidth","","nbButton","","size","small","ghost","",3,"click"],["fullWidth","","status","danger","nbButton","","size","small",3,"click"],[1,"mt-3","d-flex",3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-12","mt-3"],[3,"config","itemSelected","itemSelectedChange"],[1,"d-flex","justify-content-end"],["nbButton","","size","small",3,"disabled","nbSpinner","click"],["nbButton","","size","small","ghost","",3,"click"],[3,"roleId",4,"ngIf"],[4,"ngIf"],[3,"roleId"],["accHis",""],[3,"userIdInput"],[3,"value"],["gaTag","",3,"status"],[4,"ngFor","ngForOf"],[3,"accent"]],template:function(c,e){1&c&&u.Mc(0,O,56,17,"div",0),2&c&&u.sc("ngIf",e.user)},directives:[s.u,h.r,h.t,h.q,h.G,b.b,b.j,b.m,h.o,g.b,g.a,g.c,h.bb,s.t,f.a,h.s,h.kb,h.b,h.d,h.e,h.c,m.a,v.a,h.ab,h.j,y.a,I.a,h.P,h.Q],styles:["nb-alert[_ngcontent-%COMP%]{margin:0;padding:6px 12px}.mat-khau[_ngcontent-%COMP%]{font-size:25px;position:absolute;color:#000;margin-top:20px;right:20px;cursor:pointer}"]}),M),E=i("6n0X"),A=i("BDdu"),x=i("ronx"),D=i("tvm6"),j=i("urJw"),N=i("ArG+"),z=((P=function e(){c(this,e)}).\u0275mod=u.Vb({type:P}),P.\u0275inj=u.Ub({factory:function(c){return new(c||P)},imports:[[s.c,b.g,h.u,h.p,h.cb,h.sb,h.k,h.R,h.F,h.lb,N.a,E.a,h.H,A.a,h.f,x.a,D.a,j.a,p.g.forChild([{path:"",component:S}])]]}),P)}}])}();
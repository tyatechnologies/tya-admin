(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{Z6K3:function(t,e,c){"use strict";c.r(e),c.d(e,"GroupModule",(function(){return I}));var i=c("ofXK"),n=c("mrSG"),l=c("YTAs"),a=c("cp0P"),d=c("nYR2"),o=c("ExIg"),r=c("fXoL"),s=c("aceb"),u=c("3Pt+"),p=c("NL+w"),m=c("wnGv");const h=["tplCellParent"],b=["tplCellSum"],g=["table"];function f(t,e){if(1&t){const t=r.ec();r.dc(0,"nb-card"),r.dc(1,"nb-card-header"),r.Oc(2,"Ch\u1ec9nh s\u1eeda"),r.cc(),r.dc(3,"nb-card-body"),r.dc(4,"div",0),r.dc(5,"div",17),r.dc(6,"label",4),r.dc(7,"strong"),r.Oc(8,"Nh\xf3m quy\u1ec1n"),r.cc(),r.cc(),r.cc(),r.Yb(9,"div",18),r.cc(),r.cc(),r.dc(10,"nb-card-footer",19),r.dc(11,"button",20),r.kc("click",(function(){return r.Dc(t),r.mc().cancelMulEdit()})),r.Oc(12," H\u1ee7y "),r.cc(),r.dc(13,"button",7),r.kc("click",(function(){return r.Dc(t),r.mc().mulEditSubmit()})),r.Oc(14," C\u1eadp nh\u1eadt "),r.cc(),r.cc(),r.cc()}if(2&t){const t=r.mc();r.Lb(13),r.sc("disabled",t.isMulEditingReq)("nbSpinner",t.isMulEditingReq)}}function y(t,e){1&t&&r.Oc(0),2&t&&r.Qc(" ",e.value.length,"\n")}function v(t,e){if(1&t&&(r.bc(0),r.Oc(1),r.ac()),2&t){const t=r.mc().value;r.Lb(1),r.Qc(" ",t.applicationGroupName," ")}}function E(t,e){if(1&t){const t=r.ec();r.bc(0),r.dc(1,"ga-tree",21),r.kc("itemSelectedChange",(function(e){return r.Dc(t),r.mc().rowEdit.parent=e})),r.cc(),r.ac()}if(2&t){const t=r.mc(2);r.Lb(1),r.sc("config",t.treeConfig)}}function k(t,e){if(1&t&&(r.Mc(0,v,2,1,"ng-container",12),r.Mc(1,E,2,1,"ng-container",12)),2&t){const t=e.isEdit;r.sc("ngIf",!t),r.Lb(1),r.sc("ngIf",t)}}let S=(()=>{class t{constructor(t,e){this.applicationGroupService=t,this.toast=e,this.ColumnMode=o.a,this.columns=[],this.actions=[{name:"quick-edit"},{name:"delete"}],this.bulkActions=[{name:"edit",title:"Ch\u1ec9nh s\u1eeda"},{name:"delete",title:"X\xf3a"}],this.datatableService={service:this.applicationGroupService,primaryField:"applicationGroupId",builder:this.getDataServiceBuilder.bind(this)},this.entityAdd={},this.isAdding=!1,this.treeConfig={displayValueAll:!0,service:this.applicationGroupService,fieldValue:"applicationGroupId",fieldName:"applicationGroupName",fieldParent:"parentId"},this.filterEntity={applicationGroupName:"",parent:{applicationGroupId:null,applicationGroupName:"T\u1ea5t c\u1ea3 quy\u1ec1n"}},this.tblItemSelected=[],this.mulEditEntity=null,this.isMulEditingReq=!1}ngOnInit(){this.columns=[{name:"T\xean",prop:"applicationGroupName",width:270,type:"string"},{name:"Nh\xf3m",prop:"parent",width:270,cellTemplate:this.tplCellParent},{name:"S\u1ed1 l\u01b0\u1ee3ng \u1ee9ng d\u1ee5ng",prop:"applications",cellTemplate:this.tplCellSum,width:70}]}getDataServiceBuilder(t){const{applicationGroupName:e,parentId:c}=this.filterEntity;t.select(["applicationGroupId","applicationGroupName","parent","applications"]),t.setJoin([{field:"parent",select:["applicationGroupName"]},{field:"applications",select:["applicationId"]}]),c&&t.setFilter({field:"parentId",operator:"$eq",value:c}),e&&t.setFilter({field:"applicationGroupName",operator:"$cont",value:e})}filter(){this.table.loadData()}selectedItem(t){this.tblItemSelected=t.selected}bulkClick(t){"delete"===t.action.name||"edit"===t.action.name&&(this.mulEditEntity={})}buttonNewClick(){return Object(n.a)(this,void 0,void 0,(function*(){if(this.entityAdd.applicationGroupName)try{this.isAdding=!0,yield this.applicationGroupService.create(this.entityAdd).toPromise(),this.toast.success("Th\xeam m\u1edbi th\xe0nh c\xf4ng","Th\xf4ng b\xe1o"),this.table.loadData()}catch(t){this.toast.danger(t&&t.message,"L\u1ed7i")}finally{this.isAdding=!1}else this.toast.warning("Nh\u1eadp t\xean nh\xf3m \u1ee9ng d\u1ee5ng","L\u1ed7i nh\u1eadp li\u1ec7u")}))}get isMulEdit(){return Boolean(this.mulEditEntity)}mulEditSubmit(){this.tblItemSelected&&this.mulEditEntity&&(this.isMulEditingReq=!0,this.subcriberMulEdit=Object(a.a)(this.tblItemSelected.map(t=>this.applicationGroupService.patch(t.applicationGroupId,{parent:this.mulEditEntity.parent}))).pipe(Object(d.a)(()=>{this.isMulEditingReq=!1,delete this.subcriberMulEdit,delete this.mulEditEntity})).subscribe(t=>{this.toast.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng","Th\xe0nh c\xf4ng"),this.table.loadData()},t=>{this.toast.danger(t&&t.message,"L\u1ed7i")}))}cancelMulEdit(){this.subcriberMulEdit&&this.subcriberMulEdit.unsubscribe(),delete this.subcriberMulEdit,this.mulEditEntity=null,this.isMulEditingReq=!1}}return t.\u0275fac=function(e){return new(e||t)(r.Xb(l.a),r.Xb(s.qb))},t.\u0275cmp=r.Rb({type:t,selectors:[["ga-group"]],viewQuery:function(t,e){var c;1&t&&(r.Jc(h,!0),r.Jc(b,!0),r.Sc(g,!0)),2&t&&(r.zc(c=r.lc())&&(e.tplCellParent=c.first),r.zc(c=r.lc())&&(e.tplCellSum=c.first),r.zc(c=r.lc())&&(e.table=c.first))},decls:38,vars:18,consts:[[1,"row"],[1,"col-md-12"],[1,"col-md-4"],["nbInput","","fieldSize","small","fullWidth","","placeholder","T\xean nh\xf3m \u1ee9ng d\u1ee5ng",1,"form-input",3,"ngModel","ngModelChange"],["for","",1,"form-input"],["fullWidth","",1,"form-input",3,"displayRefresh","config","itemSelected","itemSelectedChange"],["tree",""],["nbButton","","size","small",3,"disabled","nbSpinner","click"],[1,"col-md-8"],["placeholder","Nh\xf3m quy\u1ec1n",1,"form-input",3,"config","value","valueChange"],["nbInput","","fieldSize","small","type","text","placeholder","T\xean quy\u1ec1n",1,"form-input",3,"ngModel","ngModelChange"],["nbButton","","size","small","outline","","status","primary",1,"form-input",3,"click"],[4,"ngIf"],["selectionType","checkbox",1,"material","striped","mt-2",3,"externalPaging","columns","datatableService","actions","limit","bulkActions","rowHeight","selected","select","bulkClick"],["table",""],["tplCellSum",""],["tplCellParent",""],[1,"col-md-9","col-xs-12"],[1,"col-md-3","col-xs-12"],[1,"d-flex","justify-content-between"],["nbButton","","size","small","outline","",3,"click"],[1,"tree",3,"config","itemSelectedChange"]],template:function(t,e){if(1&t){const t=r.ec();r.dc(0,"div",0),r.dc(1,"div",1),r.dc(2,"nb-card"),r.dc(3,"nb-card-header"),r.Oc(4,"Nh\xf3m \u1ee9ng d\u1ee5ng"),r.cc(),r.dc(5,"nb-card-body"),r.dc(6,"div",0),r.dc(7,"div",2),r.dc(8,"nb-card"),r.dc(9,"nb-card-header"),r.Oc(10,"Th\xeam m\u1edbi"),r.cc(),r.dc(11,"nb-card-body"),r.dc(12,"input",3),r.kc("ngModelChange",(function(t){return e.entityAdd.applicationGroupName=t})),r.cc(),r.dc(13,"label",4),r.dc(14,"strong"),r.Oc(15,"Nh\xf3m \u1ee9ng d\u1ee5ng cha"),r.cc(),r.cc(),r.dc(16,"ga-tree",5,6),r.kc("itemSelectedChange",(function(t){return e.entityAdd.parent=t})),r.cc(),r.cc(),r.dc(18,"nb-card-footer"),r.dc(19,"button",7),r.kc("click",(function(){r.Dc(t);const c=r.Ac(17);return e.buttonNewClick(),c.loadData()})),r.Oc(20," Th\xeam m\u1edbi "),r.cc(),r.cc(),r.cc(),r.cc(),r.dc(21,"div",8),r.dc(22,"div",0),r.dc(23,"div"),r.dc(24,"div"),r.dc(25,"ga-select",9),r.kc("valueChange",(function(t){return e.filterEntity.parentId=t})),r.cc(),r.dc(26,"input",10),r.kc("ngModelChange",(function(t){return e.filterEntity.applicationGroupName=t})),r.cc(),r.dc(27,"button",11),r.kc("click",(function(){return e.filter()})),r.Oc(28," L\u1ecdc "),r.cc(),r.cc(),r.dc(29,"div"),r.Mc(30,f,15,2,"nb-card",12),r.cc(),r.cc(),r.dc(31,"div",1),r.dc(32,"ngn-datatable",13,14),r.kc("select",(function(t){return e.selectedItem(t)}))("bulkClick",(function(t){return e.bulkClick(t)})),r.cc(),r.cc(),r.cc(),r.cc(),r.cc(),r.cc(),r.cc(),r.cc(),r.cc(),r.Mc(34,y,1,1,"ng-template",null,15,r.Nc),r.Mc(36,k,2,2,"ng-template",null,16,r.Nc)}2&t&&(r.Lb(12),r.sc("ngModel",e.entityAdd.applicationGroupName),r.Lb(4),r.sc("displayRefresh",!0)("config",e.treeConfig)("itemSelected",e.entityAdd.parent),r.Lb(3),r.sc("disabled",e.isMulEdit)("nbSpinner",e.isAdding),r.Lb(6),r.sc("config",e.treeConfig)("value",e.filterEntity.parentId),r.Lb(1),r.sc("ngModel",e.filterEntity.applicationGroupName),r.Lb(4),r.sc("ngIf",e.isMulEdit),r.Lb(2),r.sc("externalPaging",!0)("columns",e.columns)("datatableService",e.datatableService)("actions",e.actions)("limit",10)("bulkActions",e.bulkActions)("rowHeight","auto")("selected",e.tblItemSelected))},directives:[s.r,s.t,s.q,s.G,u.b,u.j,u.m,p.a,s.s,s.o,s.kb,m.a,i.u,o.d],styles:[""]}),t})();var C=c("tyNb"),M=c("BDdu"),G=c("6n0X"),N=c("DS98");let I=(()=>{class t{}return t.\u0275mod=r.Vb({type:t}),t.\u0275inj=r.Ub({factory:function(e){return new(e||t)},imports:[[i.c,u.g,s.u,s.H,s.gb,s.p,s.lb,s.k,M.a,G.a,N.a,o.e,C.g.forChild([{path:"",component:S}])],C.g]}),t})()}}]);